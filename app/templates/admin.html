{% extends "layout.html" %}
{% block content %}
<h1>Admin</h1>
<section class="admin-grid">
  <form class="card" action="/admin/create" method="post">
    <h3>Add Event</h3>
    <label>Title
      <input name="title" required>
    </label>
    <label>Description
      <textarea name="description" rows="4" required></textarea>
    </label>
    <label>Venue
      <input name="venue" required>
    </label>
    <label>Date & time (ISO)
      <input name="date" type="datetime-local" required>
    </label>
    <label>Price (₹)
      <input name="price" type="number" step="0.01" value="0">
    </label>
    <label>Image URL
      <input name="image_url" placeholder="https://...">
    </label>
    <label>Total tickets
      <input name="total_tickets" type="number" value="100" min="1">
    </label>
    <button class="btn">Create</button>
  </form>

  <div class="card">
    <h3>All Events</h3>
    <ul class="list">
      {% for e in events %}
      <li class="list-item">
        <div>
          <div class="bold">{{ e.title }}</div>
          <div class="muted">{{ e.venue }} • {{ e.date.strftime('%d %b %Y %I:%M %p') }}</div>
        </div>
        <form action="/admin/delete/{{ e.id }}" method="post" onsubmit="return confirm('Delete this event?')">
          <button class="btn danger">Delete</button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>
{% endblock %}
